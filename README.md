# DdangDdangDdang (ë•…ë•…ë•…) SERVER

> **"ê·¸ ì‚¬ê±´, AI íŒì‚¬ëŠ” ì–´ë–»ê²Œ ìƒê°í• ê¹Œ?"** \> ì‚¬ìš©ìê°€ ì œê¸°í•œ ë°¸ëŸ°ìŠ¤ ê²Œì„ ì•ˆê±´ì— ëŒ€í•´ **AIê°€ ì¦‰ê²° ì‹¬íŒ**ì„ ë‚´ë¦¬ê³ ,  
> ìœ ì €ë“¤ì´ ë³€í˜¸ì‚¬ê°€ ë˜ì–´ **í† ë¡  ë° íˆ¬í‘œ**ë¥¼ í†µí•´ ìµœì¢… íŒê²°ì„ ë’¤ì§‘ëŠ” **AI ê¸°ë°˜ ë²•ì • í† ë¡  í”Œë«í¼**ì…ë‹ˆë‹¤.
> https://ddang-ddang-ddang-fe-8npo.vercel.app/
> https://ddangx3.site/

-----

## ğŸ“– í”„ë¡œì íŠ¸ ì†Œê°œ

**ë•…ë•…ë•…**ì€ ë‹¨ìˆœí•œ ë°¸ëŸ°ìŠ¤ ê²Œì„ì„ ë„˜ì–´, **AI(ChatGPT)ì™€ì˜ ìƒí˜¸ì‘ìš©**ê³¼ **ì‚¬ìš©ì ê°„ì˜ ë…¼ë¦¬ ëŒ€ê²°**ì„ ê²°í•©í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.  
ì¬íŒì€ ì´ 3ë‹¨ê³„ë¡œ ì§„í–‰ë˜ë©°, ê° ë‹¨ê³„ë§ˆë‹¤ ì°¨ë³„í™”ëœ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.

### ğŸ”„ ì¬íŒ í”„ë¡œì„¸ìŠ¤ (Core Flow)

1.  **1ì°¨ ì¬íŒ (ì´ˆì‹¬)**: ì‚¬ìš©ìê°€ ì‚¬ê±´(ì£¼ì œ)ê³¼ ì–‘ì¸¡ ì…ì¥ì„ ë“±ë¡í•˜ë©´, **AI íŒì‚¬**ê°€ ì¦‰ì‹œ ë…¼ë¦¬ë¥¼ ë¶„ì„í•˜ì—¬ 1ì°¨ íŒê²°ì„ ë‚´ë¦½ë‹ˆë‹¤.
2.  **2ì°¨ ì¬íŒ (í•­ì†Œ/í† ë¡ )**: ìœ ì €ë“¤ì€ ë°°ì‹¬ì›ì´ ë˜ì–´ 'ë³€ë¡ (ê²Œì‹œê¸€)'ê³¼ 'ë°˜ë¡ (ëŒ€ëŒ“ê¸€)'ì„ ì‘ì„±í•˜ê³ , íˆ¬í‘œë¥¼ í†µí•´ ì—¬ë¡ ì„ í˜•ì„±í•©ë‹ˆë‹¤.
3.  **3ì°¨ ì¬íŒ (ìµœì¢…ì‹¬)**: íˆ¬í‘œ ê²°ê³¼ì™€ ì±„íƒëœ ìš°ìˆ˜ ë³€ë¡ ë“¤ì„ ì¢…í•©í•˜ì—¬ **AIê°€ ìµœì¢… íŒê²°ë¬¸**ì„ í™•ì • ì§“ìŠµë‹ˆë‹¤.

-----

## ğŸ› ï¸ Tech Stack

| Category | Stack |
|---|---|
| **Language** | Java 17 |
| **Framework** | Spring Boot 3.5.6 |
| **ORM / DB** | Spring Data JPA, MySQL, H2(Test), Redis |
| **Auth / Security** | Spring Security, JWT (Access/Refresh Token) |
| **Infra / Storage** | AWS S3, EC2, RDS |
| **AI / LLM** | OpenAI API (GPT-4o) |
| **Mail / Noti** | JavaMailSender, Slack Webhook, SSE |
| **Build / Deploy** | Gradle, GitHub Actions |
| **Etc** | Lombok, Swagger (SpringDoc), WebSocket(SSE) |

-----

## âœ¨ Key Features

### 1\. AI íŒì‚¬ & ì‚¬ê±´ ê´€ë¦¬

  * **ì†”ë¡œ/íŒŒí‹° ëª¨ë“œ**: í˜¼ìì„œ ê²°ê³¼ë¥¼ í™•ì¸í•˜ê±°ë‚˜(Solo), ëŒ€ê¸°ë°©ì„ ë§Œë“¤ì–´ íƒ€ì¸ê³¼ ëŒ€ê²°(Party/VS)í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  * **ì‹¤ì‹œê°„ AI íŒê²°**: OpenAI APIë¥¼ ì—°ë™í•˜ì—¬, ì–‘ì¸¡ ì£¼ì¥ì˜ ë…¼ë¦¬ì  í—ˆì ì„ ë¶„ì„í•˜ê³  ìŠ¹ì†Œ ë¹„ìœ¨(%)ê³¼ íŒê²°ë¬¸ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

### 2\. ë¦¬ì–¼íƒ€ì„ í† ë¡  ì‹œìŠ¤í…œ

  * **ë³€ë¡  ë° ë°˜ë¡ **: ê³„ì¸µí˜• ëŒ“ê¸€ êµ¬ì¡°(ë³€ë¡ -ë°˜ë¡ -ëŒ€ëŒ€ëŒ“ê¸€)ë¥¼ í†µí•´ ê¹Šì´ ìˆëŠ” í† ë¡ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
  * **ì‹¤ì‹œê°„ ìƒí˜¸ì‘ìš©**: `SSE(Server-Sent Events)`ë¥¼ ì ìš©í•˜ì—¬, ë‚´ ê¸€ì— ë°˜ë¡ ì´ ë‹¬ë¦¬ê±°ë‚˜ íŒê²°ì´ ë‚˜ë©´ ì¦‰ì‹œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤.
  * **ì¢‹ì•„ìš” & íˆ¬í‘œ**: ìœ ì €ë“¤ì˜ ê³µê°ì„ ì–»ì€ ì˜ê²¬ì€ ìƒìœ„ ë…¸ì¶œë˜ë©°, íˆ¬í‘œ ê²°ê³¼ëŠ” ìµœì¢…ì‹¬ì— ë°˜ì˜ë©ë‹ˆë‹¤.

### 3\. ê²Œì´ë¯¸í”¼ì¼€ì´ì…˜ (MyPage)

  * **ë­í‚¹ ì‹œìŠ¤í…œ**: `Redis ZSet`ì„ í™œìš©í•˜ì—¬ ì‹¤ì‹œê°„ìœ¼ë¡œ 'í•«í•œ í† ë¡ 'ê³¼ 'ìœ ì € ë­í‚¹'ì„ ì‚°ì •í•©ë‹ˆë‹¤.
  * **ì—…ì  & ë“±ê¸‰**: í™œë™ëŸ‰(ìŠ¹ì†Œ, ëŒ“ê¸€ ìˆ˜ ë“±)ì— ë”°ë¼ ê²½í—˜ì¹˜(EXP)ë¥¼ íšë“í•˜ê³ , 'ë³€í˜¸ì‚¬', 'íŒì‚¬' ë“±ìœ¼ë¡œ ë“±ê¸‰ì´ ìŠ¹ê²©ë©ë‹ˆë‹¤.

### 4\. ìš´ì˜ ë° ëª¨ë‹ˆí„°ë§

  * **ì‹ ê³  ìë™í™”**: ìš•ì„¤/ë¹„ë°© ë“± ë¶€ì ì ˆí•œ ë³€ë¡ ì´ ëˆ„ì  ì‹ ê³ (5íšŒ)ë˜ë©´ ìë™ìœ¼ë¡œ ë¸”ë¼ì¸ë“œ ì²˜ë¦¬ë˜ê³  Slackìœ¼ë¡œ ì•Œë¦¼ì´ ì „ì†¡ë©ë‹ˆë‹¤.
  * **ìŠ¤ì¼€ì¤„ëŸ¬**: ë§¤ì¼ ìì •, ë§ˆê°ëœ ì‚¬ê±´ë“¤ì˜ ì¸ê¸° ì˜ê²¬ì„ ìë™ìœ¼ë¡œ ì±„íƒí•˜ì—¬ ìµœì¢… íŒê²°ì„ ì§„í–‰í•©ë‹ˆë‹¤.

-----
## ğŸ” ìƒì„¸ ê¸°ëŠ¥ ëª…ì„¸

### ğŸ§© ì¸ì¦ ë° ìœ ì € ê´€ë¦¬

  - **íšŒì›ê°€ì…/ë¡œê·¸ì¸** â†’ `POST /api/v1/auth/signup`, `/login`
  - **ì´ë©”ì¼ ì¸ì¦** â†’ ì¸ì¦ë²ˆí˜¸ ë°œì†¡/ê²€ì¦ (`/email/send-code`, `/verify-code`)
  - **í† í° ì¬ë°œê¸‰** â†’ `POST /api/v1/auth/refresh`
  - **í”„ë¡œí•„ ê´€ë¦¬** â†’ ì •ë³´ ìˆ˜ì •, í”„ë¡œí•„ ì´ë¯¸ì§€ S3 ì—…ë¡œë“œ (`/api/users/...`)

### âš–ï¸ ì‚¬ê±´ ê´€ë¦¬ ë° 1ì°¨ ì¬íŒ

  - **ì‚¬ê±´ ìƒì„±** â†’ ì†”ë¡œ/VS ëª¨ë“œ ì„ íƒ (`POST /api/v1/cases`)
  - **VS ëª¨ë“œ ë§¤ì¹­** â†’ ëŒ€ê¸° ëª©ë¡ ì¡°íšŒ ë° ì…ì¥ë¬¸ ì œì¶œë¡œ ì°¸ì—¬ (`/api/v1/cases/pending`)
  - **AI 1ì°¨ íŒê²°** â†’ ì–‘ì¸¡ ì…ì¥ ë¶„ì„ í›„ ì¦‰ì‹œ íŒê²°ë¬¸ ìƒì„±

### ğŸ—£ï¸ 2ì°¨ ì¬íŒ (í† ë¡  ë° íˆ¬í‘œ)

  - **ë³€ë¡ /ë°˜ë¡ ** â†’ ì˜ê²¬ ì‘ì„±(CRUD), ê³„ì¸µí˜• ëŒ“ê¸€ êµ¬ì¡° (ëŒ€ëŒ“ê¸€)
  - **ë°°ì‹¬ì› íˆ¬í‘œ** â†’ A/B ì§„ì˜ íˆ¬í‘œ (`POST /api/v1/cases/{caseId}/vote`)
  - **ì¢‹ì•„ìš”** â†’ ë³€ë¡ /ë°˜ë¡  ì¢‹ì•„ìš” ë° ë­í‚¹ ì ìˆ˜ ë°˜ì˜ (`/api/likes`)

### ğŸ‘¨â€âš–ï¸ 3ì°¨ ì¬íŒ (ìµœì¢… íŒê²°)

  - **ì˜ê²¬ ì±„íƒ** â†’ ì‚¬ìš©ìê°€ ìµœì¢…ì‹¬ì— ë°˜ì˜í•  ì˜ê²¬ ì„ íƒ (`/api/final/adopt`)
  - **ìë™ ì±„íƒ** â†’ ìŠ¤ì¼€ì¤„ëŸ¬(ë§¤ì¼ ìì •)ê°€ ë§ˆê°ëœ ì‚¬ê±´ì˜ ì¸ê¸° ì˜ê²¬ ìë™ ì±„íƒ
  - **AI ìµœì¢… íŒê²°** â†’ ì±„íƒëœ ì˜ê²¬ + íˆ¬í‘œ ê²°ê³¼ë¥¼ ì¢…í•©í•˜ì—¬ ìµœì¢… íŒê²°ë¬¸ ìƒì„±
  - **ìŠ¹íŒ¨ ì •ì‚°** â†’ ê²°ê³¼ì— ë”°ë¼ ê²½í—˜ì¹˜(EXP) ë° ìŠ¹/íŒ¨ ê¸°ë¡ ì—…ë°ì´íŠ¸

### ğŸ† ë­í‚¹ ë° í™ˆ í™”ë©´

  - **ì‹¤ì‹œê°„ í•«í•œ í† ë¡ ** â†’ Redis ZSet ê¸°ë°˜ ì¸ê¸° ê²Œì‹œê¸€ ë…¸ì¶œ (`/api/home/hot`)
  - **ìœ ì € ë­í‚¹** â†’ ê²½í—˜ì¹˜ ê¸°ë°˜ ë“±ê¸‰(ë³€í˜¸ì‚¬, íŒì‚¬ ë“±) ë¶€ì—¬

### ğŸ”” ì•Œë¦¼ ë° ì‹ ê³ 

  - **ì‹¤ì‹œê°„ ì•Œë¦¼** â†’ SSE(Server-Sent Events)ë¡œ ë‚´ ê¸€ì— ë‹¬ë¦° ëŒ“ê¸€/íŒê²° ì™„ë£Œ ì•Œë¦¼
  - **ì‹ ê³  ê¸°ëŠ¥** â†’ ë¶€ì ì ˆí•œ ì½˜í…ì¸  ì‹ ê³ , 5íšŒ ëˆ„ì  ì‹œ ìë™ ë¸”ë¼ì¸ë“œ & Slack ì•Œë¦¼ ì „ì†¡
-----

## ğŸ›ï¸ System Architecture

```mermaid
graph TD
    User[Client] -->|HTTP/HTTPS| API_Gateway[Spring Boot Server]
    
    subgraph Backend
    API_Gateway -->|Data Access| DB[(MySQL)]
    API_Gateway -->|Cache & Ranking| Redis[(Redis)]
    API_Gateway -->|Image Upload| S3[AWS S3]
    end
    
    subgraph External Services
    API_Gateway -->|Judgment Request| AI[OpenAI GPT-4o]
    API_Gateway -->|Email Auth| SMTP[Gmail SMTP]
    API_Gateway -->|Monitoring| Slack[Slack Webhook]
    end
```

-----

## ğŸ“‚ Project Structure

```bash
com.demoday.ddangddangddang
â”œâ”€â”€ controller      # API ì—”ë“œí¬ì¸íŠ¸ (Case, Debate, Final, Auth ë“±)
â”œâ”€â”€ service         # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (AI íŒê²°, ë­í‚¹ ì‚°ì •, íˆ¬í‘œ ì²˜ë¦¬)
â”œâ”€â”€ repository      # DB ì ‘ê·¼ ê³„ì¸µ (JPA)
â”œâ”€â”€ domain          # ì—”í‹°í‹° ì„¤ê³„ (User, Case, Judgment, Defense...)
â”œâ”€â”€ dto             # ë°ì´í„° ì „ì†¡ ê°ì²´ (Request/Response)
â””â”€â”€ global
    â”œâ”€â”€ config      # Security, Swagger, S3, Redis ì„¤ì •
    â”œâ”€â”€ jwt         # JWT ì¸ì¦ í•„í„° ë° Provider
    â”œâ”€â”€ sse         # ì‹¤ì‹œê°„ ì•Œë¦¼ (SSE) êµ¬í˜„
    â””â”€â”€ exception   # ì»¤ìŠ¤í…€ ì˜ˆì™¸ ì²˜ë¦¬
```

-----

## ğŸš€ Deployment Pipeline

GitHub Main ë¸Œëœì¹˜ì— ì½”ë“œê°€ í‘¸ì‹œë˜ë©´, **GitHub Actions**ê°€ ìë™ìœ¼ë¡œ ë¹Œë“œ ë° ë°°í¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

1.  **Code Push**: `main` ë¸Œëœì¹˜ ë³‘í•©
2.  **Build**: JDK 17 í™˜ê²½ì—ì„œ Gradle ë¹Œë“œ (Test ì œì™¸)
3.  **Transfer**: ë¹Œë“œëœ JAR íŒŒì¼ì„ AWS EC2ë¡œ ì „ì†¡ (SCP)
4.  **Deploy**: EC2 ë‚´ë¶€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ í›„ ì¬ì‹œì‘ (`nohup`)

-----

## ğŸ“ API Documentation

ì„œë²„ ì‹¤í–‰ í›„ ì•„ë˜ ì£¼ì†Œì—ì„œ **Swagger UI**ë¥¼ í†µí•´ API ëª…ì„¸ë¥¼ í™•ì¸í•˜ê³  í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  * **Swagger URL**: `https://ddangx3.site/swagger-ui/index.html`
      * *(ë¡œì»¬ í™˜ê²½: `http://localhost:8080/swagger-ui/index.html`)*

-----

## ğŸ§‘â€ğŸ’» Contributors

| ì´ë¦„ | ì—­í•  | ë‹´ë‹¹ ê¸°ëŠ¥ |
|---|---|---|
| **í™©ì‹ ì• [@shinae1023](https://github.com/shinae1023)** | ë°±ì—”ë“œ | **ìµœì¢… íŒê²°(3ì°¨)** ë¡œì§, ì˜ê²¬ ì±„íƒ ë° ìë™ ì±„íƒ ìŠ¤ì¼€ì¤„ëŸ¬, ë§ˆì´í˜ì´ì§€, ì¢‹ì•„ìš” ê¸°ëŠ¥, ì•Œë¦¼(SSE), ë©”ì¸í˜ì´ì§€, ë°°í¬ ë° CI/CD êµ¬í˜„ |
| **ìµœìš°í˜[@whc9999](https://github.com/whc9999)** | ë°±ì—”ë“œ | **ì¸ì¦(Auth)** ë° íšŒì›ê°€ì…(ì´ë©”ì¼ ì¸ì¦), **ì‚¬ê±´ ìƒì„±(1ì°¨)** ë° VS ëª¨ë“œ ë§¤ì¹­, **2ì°¨ ì¬íŒ** ë³€ë¡ /ë°˜ë¡  ë° íˆ¬í‘œ ì‹œìŠ¤í…œ, ì‹ ê³  ê¸°ëŠ¥ êµ¬í˜„ |
